"use strict";window.addEventListener("DOMContentLoaded",function(){if(document.querySelector("header")){var e=function(){300<window.scrollY&&"/"===window.location.pathname&&!window.location.search?t.setAttribute("style","background:black;box-shadow:0 0 10px black"):window.location.search?t.setAttribute("style","background:black;box-shadow:0 0 10px black"):t.setAttribute("style","background:transparent;box-shadow:0 0 10px transparent")},t=document.querySelector("header");window.location.search&&t.setAttribute("style","background:black;box-shadow:0 0 10px black"),"/"!=window.location.pathname?(window.removeEventListener("scroll",e),t.setAttribute("style","background:black;box-shadow:0 0 10px black")):window.addEventListener("scroll",e,!1)}}),document.querySelector(".hero-scroll-down")&&document.querySelector(".hero-scroll-down").addEventListener("click",function(){window.scrollBy({top:window.innerHeight-70,left:0,behavior:"smooth"})}),window.addEventListener("DOMContentLoaded",function(){if(document.querySelector("#login-modal-trigger")){var t=function(){var e=n.value,t=c.value;if(d.setAttribute("disabled",!0),l.textContent="",n.value.trim()&&c.value.trim()){var r=JSON.stringify({name:e,password:t});p.classList.add("wrapper-active"),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:r}).then(function(e){return e.json()}).then(function(e){p.classList.remove("wrapper-active"),d.setAttribute("disabled",!1),n.value="",c.value="",e.error?l.textContent="The username or password provided is incorrect":window.location.href="/"}).catch(function(e){console.log(e)})}else p.classList.remove("wrapper-active"),e.trim()?t.trim()||(i.textContent="*Password field is empty!"):a.textContent="*Username field is empty!"},e=function(){r.classList.toggle("modal-active"),o.classList.toggle("wrapper-active")},r=document.querySelector("#login-modal"),o=document.querySelector("#login-modal-wrapper.--wrapper"),n=document.querySelector("#login-modal--username"),a=document.querySelector("#login-modal--username-error"),c=document.querySelector("#login-modal--password"),i=document.querySelector("#login-modal--password-error"),l=document.querySelector("#login-modal--login-error"),d=document.querySelector("#login-modal--button"),s=document.querySelector("#login-modal-trigger"),u=document.querySelector(".modal--close-btn"),p=document.querySelector("#loader-wrapper");r.addEventListener("click",function(e){return e.stopPropagation()}),s.addEventListener("click",e),u.addEventListener("click",e),o.addEventListener("click",e),d.addEventListener("click",t),o.classList.contains("wrapper-active")?window.addEventListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&d.addEventListener("click",t)}):window.removeListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&d.addEventListener("click",t)})}}),function(){var c=!0;window.addEventListener("DOMContentLoaded",function(){if(document.querySelector("#articles")){var r=function(e){c&&(a.textContent=e.length,c=!1),n.innerHTML="",e.length?(e.forEach(function(e){n.innerHTML+='\n                    <div class="article-item">\n                            <p id="article-title">'.concat(e.title,'</p>\n                            <p id="article-description">').concat(e.description,'</p>\n                            <p id="article-published-date">').concat(e.publishedDate,'</p>\n                            <p id="article-author">You</p>\n                            <div class="stylish-row-group">\n                                <a href="/dashboard/editor?id=').concat(e._id,'"><div class="stylish-tag">EDIT</div></a>\n                                <div id="delete-article" data-article-id=').concat(e._id,' class="stylish-tag" style="background-color: #E91E63!important;">DELETE</div>\n                            </div>\n                </div>\n                    ')}),t()):(n.innerHTML+='\n                    <div class="article-item">\n                            <p id="article-title">No post found</p>\n                </div>',l.classList.remove("wrapper-active"))},t=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&"string"==typeof e?(console.log("Deleting",c),l.classList.add("wrapper-active"),i(e,function(e){c="",l.classList.remove("wrapper-active"),alert(e),window.location.reload()})):(r.classList.toggle("modal-active"),o.classList.toggle("wrapper-active"))}l.classList.remove("wrapper-active");var r=document.querySelector("#alert-modal"),o=document.querySelector("#alert-modal-wrapper.--wrapper"),e=document.querySelector("#alert-modal--closeBtn"),n=document.querySelector("#alert-modal-yes"),a=document.querySelector("#alert-modal-no"),c=(e=document.querySelector("#alert-modal--closeBtn"),"");r.addEventListener("click",function(e){return e.stopPropagation()}),e.addEventListener("click",t),o.addEventListener("click",t),a.addEventListener("click",t),n.addEventListener("click",function(){t(c)}),setTimeout(function(){Array.from(document.querySelectorAll("#delete-article")).forEach(function(e){return e.onclick=function(e){c=e.target.dataset.articleId,console.log("Triggering modal",c),t()}})},0)},o=function(e,t){l.classList.add("wrapper-active"),fetch("/search?q=".concat(e)).then(function(e){return e.json()}).then(function(e){l.classList.remove("wrapper-active"),t(e.results),l.classList.remove("wrapper-active")}).catch(function(e){return alert("An error occurred")})},i=function(e,t){l.classList.add("wrapper-active"),fetch("/api/article/delete/".concat(e)).then(function(e){return e.json()}).then(function(e){l.classList.remove("wrapper-active"),t(e.message)}).catch(function(e){l.classList.remove("wrapper-active"),alert("An error occured when deleting the post")})},e=document.querySelector("input#dashboard-search"),n=document.querySelector("#articles"),l=document.querySelector("#loader-wrapper"),a=document.querySelector("#article-count");o("",r),e.onkeyup=function(e){l.classList.add("wrapper-active"),n.innerHTML="";var t=e.target.value;o(t,r)}}})}()(function(){if(document.querySelector(".sidebar")){var t=document.querySelector(".sidebar"),r=document.querySelector("#sidebar-wrapper.--wrapper");if(document.querySelector(".sidebar--trigger")){var e=function(e){e.stopPropagation(),t.classList.toggle("sidebar-active"),r.classList.toggle("wrapper-active")};document.querySelector(".sidebar--trigger").addEventListener("click",e),r.addEventListener("click",e)}}})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJoZWFkZXJTY3JpcHQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwiaGVhZGVyIiwic2Nyb2xsWSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzZWFyY2giLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxIYW5kbGVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNjcm9sbEJ5IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJsZWZ0IiwiYmVoYXZpb3IiLCJzdWJtaXRDcmVkZW50aWFscyIsImNhdGNoIiwibmFtZSIsInVzZXJuYW1lSW5wdXQiLCJ2YWx1ZSIsImxvZyIsInBhc3N3b3JkSW5wdXQiLCJtb2RhbExvZ2luQnV0dG9uIiwibG9naW5FcnJvciIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwidHJpbSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicGFzc3dvcmQiLCJhZGQiLCJ1c2VybmFtZUVycm9yIiwibWV0aG9kIiwicGFzc3dvcmRFcnJvciIsIkNvbnRlbnQtVHlwZSIsInRoZW4iLCJyZXMiLCJqc29uIiwidG9nZ2xlTW9kYWxTdGF0ZSIsInJlbW92ZSIsImNvbnNvbGUiLCJsb2dpbk1vZGFsVHJpZ2dlciIsInN0b3BQcm9wYWdhdGlvbiIsImxvZ2luTW9kYWwiLCJ0b2dnbGUiLCJtb2RhbFdyYXBwZXIiLCJjb250YWlucyIsImxvZ2luTW9kYWxTY3JpcHQiLCJtb2RhbENsb3NlQnRuIiwiZSIsImxvYWRlciIsImZldGNoIiwiaGVhZGVycyIsImtleUNvZGUiLCJmaXJzdExvYWQiLCJyZW1vdmVMaXN0ZW5lciIsInJlc3VsdHMiLCJwb3B1bGF0ZUFydGljbGVDb250YWluZXIiLCJpbm5lckhUTUwiLCJsZW5ndGgiLCJmb3JFYWNoIiwicG9zdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwdWJsaXNoZWREYXRlIiwiX2lkIiwiYWRkTGlzdGVuZXJzIiwiY29udGFpbmVyIiwiYXJ0aWNsZUlkIiwiYXJ0aWNsZVRvRGVsZXRlSWQiLCJ0b2dnbGVBbGVydE1vZGFsU3RhdGUiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJhbGVydE1vZGFsIiwiYWxlcnRNb2RhbFdyYXBwZXIiLCJkZWxldGVBcnRpY2xlIiwibWVzc2FnZSIsImFsZXJ0IiwicmVsb2FkIiwiYWxlcnRNb2RhbE5vIiwiYWxlcnRNb2RhbENsb3NlQnRuIiwiYWxlcnRNb2RhbFllcyIsInNldFRpbWVvdXQiLCJBcnJheSIsImZyb20iLCJzZWFyY2hUZXJtIiwidCIsIm9uY2xpY2siLCJ0YXJnZXQiLCJkYXRhc2V0Iiwic2VhcmNoRm9yQXJ0aWNsZSIsImNiIiwiY29uY2F0Iiwic2VhcmNoQmFyIiwib25rZXl1cCIsInNpZGViYXIiLCJzaWRlYmFyU2NyaXB0Iiwic2lkZWJhcldyYXBwZXIiLCJ0b2dnbGVTaWRlYmFyU3RhdGUiXSwibWFwcGluZ3MiOiJhQUNDQSxPQUFTQyxpQkFBZSxtQkFBQSxXQUNmLEdBQUNDLFNBQUFBLGNBQWlCLFVBQXhCLENBQUEsSUFhMkJDLEVBQVBDLFdBQ0csSUFBQUosT0FBQUssU0FBQSxNQUFBTCxPQUFBTSxTQUFBQyxXQUFBUCxPQUFBTSxTQUFBRSxPQUNJTCxFQUFBQSxhQUFQLFFBQTZCLDhDQUVwQ0gsT0FBQU0sU0FBQUUsT0FoQjJCSixFQUFBRCxhQUFBLFFBQUEsOENBQ25CTSxFQUFTQyxhQUFjLFFBQXBDLDJEQURPTixFQUFDTSxTQUFjQSxjQUFVLFVBUWxCVixPQUFDSyxTQUFQRyxRQUNNSixFQUFDRCxhQUFhLFFBQVMsOENBVUwsS0FBNUJILE9BQU9NLFNBQVNDLFVBQVZQLE9BQUNNLG9CQUEwQixTQUFBSyxHQUMxQkMsRUFBQUEsYUFBb0IsUUFBVUQsK0NBRWxDWCxPQUFBRSxpQkFBQSxTQUFBUyxHQUFBLE1BU1ZGLFNBQVNDLGNBQWMsc0JBQ1BELFNBQVNDLGNBQWMscUJBQzdCUixpQkFBaUIsUUFBUyxXQUNyQ0YsT0FBT2EsU0FBUyxDQUFBQyxJQUFBZCxPQUFBZSxZQUFBLEdBQUFDLEtBQUEsRUFBQUMsU0FBQSxhQUVuQmpCLE9BQUFFLGlCQUFBLG1CQUFBLFdBTkwsR0FBQU8sU0FBQUMsY0FBQSx3QkFBQSxDQUFBLElBc0VxQlEsRUFBQSxXQUVKQyxJQUFNQyxFQUFBQyxFQUFPQyxNQUFTQyxFQUFSQyxFQUFBRixNQUVMLEdBcEJWRyxFQUFBdEIsYUFBQSxZQUFBLEdBbUJLdUIsRUFBQUMsWUFBQSxHQUNNQyxFQUFQTixNQUF3Qk8sUUFBQUwsRUFBeEJGLE1BQUFPLE9BQUEsQ0F0QkosSUFBSUMsRUFBT0MsS0FBS0MsVUFBVyxDQUFDWixLQUFBQSxFQUFLYSxTQUFBQSxJQXVCekJiLEVBQUtTLFVBQU9LLElBQUEsa0JBQ1pDLE1BQUFBLFNBQWNSLENBQ1pTLE9BQUlILE9BQ05JLFFBQWNWLENBQ2pCVyxlQUFBLG9CQXBFa0NSLEtBQUFBLElBaURwQ1MsS0FBSyxTQUFDQyxHQUFELE9BQU9BLEVBQUlDLFNBdUJkQyxLQUFBQSxTQUFBQSxHQUNNZCxFQUFBQSxVQUFpQmUsT0FBQSxrQkFDaEJsQixFQUFadEIsYUFBOEIsWUFBOUIsR0ExRXVDa0IsRUFBQUMsTUFBQSxHQXNEbkNFLEVBQWNGLE1BQVEsR0FyRGJiLEVBQUFBLE1BQ0RpQixFQUFZaEIsWUFBYyxpREFFekJWLE9BQUdTLFNBQVNDLEtBQUFBLE1BR3pCZ0IsTUFBYWpCLFNBQUFBLEdBQVFtQyxRQUFDbEMsSUFBQUEsVUFFdEJtQyxFQUFpQmpCLFVBQUduQixPQUFTQyxrQkFDaEJVLEVBQUdYLE9BR1RQLEVBQWlCMkIsU0FBZ0JpQixFQUFObkIsWUFBQSw2QkFGekJsQixFQUFTQyxZQUFjLDZCQU1wQ2UsRUFBQUEsV0F3RElzQixFQUFXbkIsVUFBVW9CLE9BQU8sZ0JBdEQ3QkMsRUFBYXJCLFVBQVVzQixPQUFTLG1CQWxCL0JILEVBQWF0QyxTQUFTQyxjQUFjLGdCQUgxQ3lDLEVBQW1CMUMsU0FBQUMsY0FBQSxrQ0FDbEJSLEVBQWlCTyxTQUFBQyxjQUFtQiwwQkFDL0J5QixFQUFlMUIsU0FBQUMsY0FBMUIsZ0NBbUNnQlEsRUFBVFQsU0FBU1MsY0FBQUEsMEJBQ0dtQixFQUFnQjVCLFNBQXhCQyxjQUFBLGdDQUNJdUIsRUFBV1QsU0FBY0YsY0FBN0IsNkJBQ0FHLEVBQWlCdEIsU0FBYU8sY0FBOUIsd0JBQ0FnQixFQUFBakIsU0FBQUMsY0FBQSx3QkE3QkEwQyxFQUFnQjNDLFNBQVNDLGNBQWMscUJBOEJwQ1csRUFBYVosU0FBT29CLGNBQVVMLG1CQUNMSixFQUFEbEIsaUJBQUEsUUFBQSxTQUFBbUQsR0FBQSxPQUFBQSxFQUFBUCxvQkFBTWIsRUFBQUEsaUJBQUFBLFFBQUFBLEdBQWpDbUIsRUFBQWxELGlCQUFBLFFBQUF3QyxHQUNBWSxFQUFPMUIsaUJBQWMsUUFBckJjLEdBQ0FhLEVBQWVyRCxpQkFBQSxRQUFBZ0IsR0FFWHNDLEVBQVE1QixVQUFBc0IsU0FBQSxrQkFDSmxELE9BQUFFLGlCQUFlLFVBQUEsU0FBQW1ELEdBSFJBLEVBQUFQLGtCQUtOaEIsS0FBQUEsRUFBQUEsU0FDREwsRUFBQXZCLGlCQUFBLFFBQUFnQixLQUdKTyxPQUFBQSxlQUFpQnRCLFVBQWEsU0FBV2tELEdBQ3pDaEMsRUFBQUEsa0JBQ0EsS0FBQUcsRUFBYWlDLFNBeEJUaEMsRUFBaUJ2QixpQkFBaUIsUUFBU2dCLFFBTjlDLFdBQ0osSUFBQXdDLEdBTEQsRUFNSDFELE9BUERFLGlCQU9LLG1CQUFBLFdBQ0RGLEdBQUFBLFNBQU8yRCxjQUFlLGFBQVUsQ0FBQSxJQXVEckN6RCxFQUFELFNBQWtCMEQsR0FDbEJuRCxJQWNPb0QsRUFBQUEsWUFBVEQsRUFBU0MsT0FDRkgsR0FBVSxHQUVUQSxFQUFZSSxVQUFaLEdBQ0hGLEVBQUFHLFFBR0dILEVBQVFJLFFBQVEsU0FBQ0MsR0FGWEgsRUFBWUEsV0FBWkEsdUdBQUFBLE9BQ1FHLEVBQUFDLE1BRFJKLGtFQUFBQSxPQUVrQkcsRUFBQUUsWUFGbEJMLHFFQUFBQSxPQUdGRyxFQUFBRyxjQUhFTixpTUFBQUEsT0FpQkxHLEVBQUFJLElBakJLUCx3SEFBQUEsT0FrQk5HLEVBQUFJLElBbEJNUCxzS0EwQkxRLE1BUkRDLEVBQVVULFdBQVYsZ0pBYUdVLEVBQVM1QyxVQUFJZSxPQUFPNkIsb0JBSWZDLEVBQUFBLFdBSUgsU0FMREMsSUFBQSxJQUFBRixFQUFBLEVBQUFHLFVBQUFaLGFBQUFhLElBQUFELFVBQUEsR0FBQUEsVUFBQSxHQUFBLEtBTUNILEdBQUEsaUJBQUFBLEdBQ0RLLFFBQVdqRCxJQUFYLFdBQTRCNkMsR0FDNUJLLEVBQUFBLFVBQWtCbEQsSUFBVW9CLGtCQUMvQitCLEVBQUFQLEVBQUEsU0FBQVEsR0FDSlAsRUFBQSxHQVJXbkIsRUFBTzFCLFVBQVVlLE9BQU8sa0JBVXRCc0MsTUFBR3hFLEdBQ2JxRSxPQUFpQnhFLFNBQVc0RSxhQUk1QkMsRUFBZTFFLFVBQVNDLE9BQUFBLGdCQUV4QjBFLEVBQXFCM0UsVUFBU0MsT0FBVCxtQkFoQmJ1RSxFQUFLckQsVUFBTGUsT0FBQSxrQkFvQlosSUFBQWtDLEVBQUFwRSxTQUFBQyxjQUFBLGdCQUVBMEUsRUFBbUJsRixTQUFpQlEsY0FBU2dFLGtDQUM3Q0ksRUFBa0I1RSxTQUFpQlEsY0FBU2dFLDBCQUc1Q1csRUFBY25GLFNBQWlCUSxjQUFTLG9CQUFLZ0UsRUFBcUJqRSxTQUFDZ0UsY0FBdEIsbUJBRzBCQSxHQUR2RWEsRUFBZTdFLFNBQUFDLGNBQUEsMEJBQ3dFLElBRS9Fa0MsRUFBUXJCLGlCQUFJLFFBQW1Ca0QsU0FBQUEsR0FBQUEsT0FBQUEsRUFBQUEsb0JBRWxDVyxFQUprRWxGLGlCQUFBLFFBQUF3RSxHQUFuRUksRUFBQTVFLGlCQUFBLFFBQUF3RSxHQURNUyxFQUFWakYsaUJBQUEsUUFBQXdFLEdBRkFXLEVBQWNuRixpQkFBaUIsUUFBUyxXQUFLd0UsRUFBc0JELEtBWW5FbkIsV0FBTzFCLFdBQ0YyRCxNQUFBQyxLQUFBL0UsU0FBY2dGLGlCQUNULG9CQUFHekIsUUFBQSxTQUFBMEIsR0FBQSxPQUFBQSxFQUFBQyxRQUFBLFNBQUF0QyxHQUFPb0IsRUFBUHBCLEVBQUF1QyxPQUFBQyxRQUFBckIsVUFDQzVCLFFBQUNILElBQU8sbUJBQUFnQyxHQUNIN0MsUUFFUDBCLElBTFp3QyxFQU1vQixTQU5wQkwsRUFBQU0sR0EvRmtDekMsRUFBQTFCLFVBQUFNLElBQUEsa0JBK0ZsQ3FCLE1BQUssYUFBQXlDLE9BQWNQLElBU2RWLEtBQUFBLFNBQUFBLEdBeEc2QixPQXdHdEN2QyxFQUFBQyxTQUNXYixLQUFVTSxTQUFBQSxHQUNab0IsRUFBQTFCLFVBQUFlLE9BQXdCNkIsa0JBQ1IvQixFQUFSQSxFQUFBbUIsU0FDQ04sRUFBQTFCLFVBQVFlLE9BQUEsb0JBQ0hmLE1BQVVlLFNBQUFBLEdBQUFBLE9BQU9zQyxNQUFBLHdCQUdqQnJELEVBQVAwQixTQUFpQlgsRUFBT29ELEdBQ3hCZCxFQUFNckQsVUFBQU0sSUFBQSxrQkFQbEJxQixNQUFBLHVCQUFBeUMsT0FBQXhCLElBMUdrQ2pDLEtBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBQyxTQTRHekJGLEtBQUssU0FBQ0UsR0EzR0hoQyxFQUFTQyxVQUFBQSxPQUFjLGtCQUN2QkQsRUFBQUEsRUFBU0MsV0FDWkQsTUFBU0MsU0FBQUEsR0FDTkQsRUFBU0MsVUFBQUEsT0FBYyxrQkFDdEJ1RSxNQUFHcEIsOENBNUROZixFQUFBQSxTQUFGcEMsY0FBQSwwQkF5RFI2RCxFQUFZOUQsU0FBU0MsY0FBYyxhQXhEM0I0QyxFQUFLRyxTQUFML0MsY0FBb0IsbUJBQ2hCZSxFQUFBQSxTQUFpQnZCLGNBQWlCLGtCQUNyQzRGLEVBQUEsR0FBQWpDLEdBRVJvQyxFQUFBQyxRQUFBLFNBQUE3QyxHQTJDUEMsRUFBQTFCLFVBQUFNLElBQUEsa0JBN0VGcUMsRUFBQVQsVUFBQSxHQURKLElBQUEyQixFQUFBcEMsRUFBQXVDLE9BQUF0RSxNQWdHZ0J3RSxFQUFpQkwsRUFBVzVCLE9BdEV2QixFQUFBLENBK0tiLFdBckhKLEdBQUFwRCxTQUFBQyxjQUFBLFlBQUEsQ0EwSEgsSUFBQXlGLEVBQVNDLFNBQWdCMUYsY0FBQSxZQUNuQkQsRUFBdUJBLFNBQUFDLGNBQVksOEJBRWxDLEdBQUFELFNBQUk0RixjQUFpQjVGLHFCQUF1QixDQUFBLElBUzVDMEYsRUFBQUEsU0FBQTlDLEdBQ0FnRCxFQUFBQSxrQkFSMkNGLEVBQUF2RSxVQUFBb0IsT0FBQSxrQkFRM0NxRCxFQUFlekUsVUFBVW9CLE9BQU8sbUJBUFh2QyxTQUFTQyxjQUFjLHFCQURwQ0EsaUJBQWMsUUFBQTRGLEdBQXFCRCxFQUt0Q0MsaUJBQUFBLFFBQUFBLE1BOUxRIiwiZmlsZSI6ImN1c3RvbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uIGhlYWRlclNjcmlwdCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykpe1xuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpXG5cbiAgICAgICAgICAgIGlmICghIXdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdiYWNrZ3JvdW5kOmJsYWNrO2JveC1zaGFkb3c6MCAwIDEwcHggYmxhY2snKVxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gc2Nyb2xsSGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPiAzMDAgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnLycgJiYgIXdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDpibGFjaztib3gtc2hhZG93OjAgMCAxMHB4IGJsYWNrJylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdiYWNrZ3JvdW5kOmJsYWNrO2JveC1zaGFkb3c6MCAwIDEwcHggYmxhY2snKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3gtc2hhZG93OjAgMCAxMHB4IHRyYW5zcGFyZW50JylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpXG4gICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDpibGFjaztib3gtc2hhZG93OjAgMCAxMHB4IGJsYWNrJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHNjcm9sbExpc3RlbmVyID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIsIGZhbHNlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0pKCk7XG5cblxuKGZ1bmN0aW9uIGhlcm9TY3JpcHQoKSB7XG4gICAgaWYoISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1zY3JvbGwtZG93bicpKXtcbiAgICAgICAgbGV0IHNjcm9sbERvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1zY3JvbGwtZG93bicpXG4gICAgICAgIHNjcm9sbERvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSh7IHRvcDogd2luZG93LmlubmVySGVpZ2h0IC0gNzAsIGxlZnQ6IDAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KVxuICAgIH0pXG4gICAgfVxufSkoKTtcblxuKGZ1bmN0aW9uIGxvZ2luTW9kYWxTY3JpcHQoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLGZ1bmN0aW9uKCl7XG4gICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC10cmlnZ2VyJykpe1xuICAgICAgICAgICAgbGV0IGxvZ2luTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwnKVxuICAgICAgICAgICAgbGV0IG1vZGFsV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC13cmFwcGVyLi0td3JhcHBlcicpXG4gICAgICAgICAgICBsZXQgdXNlcm5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC0tdXNlcm5hbWUnKVxuICAgICAgICAgICAgbGV0IHVzZXJuYW1lRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtLXVzZXJuYW1lLWVycm9yJylcbiAgICAgICAgICAgIGxldCBwYXNzd29yZElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLS1wYXNzd29yZCcpXG4gICAgICAgICAgICBsZXQgcGFzc3dvcmRFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC0tcGFzc3dvcmQtZXJyb3InKVxuICAgICAgICAgICAgbGV0IGxvZ2luRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtLWxvZ2luLWVycm9yJylcbiAgICAgICAgICAgIGxldCBtb2RhbExvZ2luQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLS1idXR0b24nKVxuICAgICAgICAgICAgbGV0IGxvZ2luTW9kYWxUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLXRyaWdnZXInKVxuICAgICAgICAgICAgbGV0IG1vZGFsQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtLWNsb3NlLWJ0bicpXG4gICAgICAgICAgICB2YXIgbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRlci13cmFwcGVyJylcbiAgICAgICAgXG4gICAgICAgICAgICBsb2dpbk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKVxuICAgICAgICAgICAgbG9naW5Nb2RhbFRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNb2RhbFN0YXRlKVxuICAgICAgICAgICAgbW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGFsU3RhdGUpXG4gICAgICAgICAgICBtb2RhbFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNb2RhbFN0YXRlKVxuICAgICAgICAgICAgbW9kYWxMb2dpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN1Ym1pdENyZWRlbnRpYWxzKVxuXG4gICAgICAgICAgICBpZihtb2RhbFdyYXBwZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyLWFjdGl2ZScpKXtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09PSAxMyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbExvZ2luQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3VibWl0Q3JlZGVudGlhbHMpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUxpc3RlbmVyKCdrZXlkb3duJyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgICAgICBpZihlLmtleUNvZGUgPT09IDEzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsTG9naW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdWJtaXRDcmVkZW50aWFscylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gc3VibWl0Q3JlZGVudGlhbHMoKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSB1c2VybmFtZUlucHV0LnZhbHVlXG4gICAgICAgICAgICAgICAgbGV0IHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWx1ZVxuICAgICAgICAgICAgICAgIG1vZGFsTG9naW5CdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsdHJ1ZSk7XG4gICAgICAgICAgICAgICAgbG9naW5FcnJvci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmKHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpICYmIHBhc3N3b3JkSW5wdXQudmFsdWUudHJpbSgpKXtcbiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IEpTT04uc3RyaW5naWZ5KCh7bmFtZSxwYXNzd29yZH0pKVxuICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgZmV0Y2goJy9sb2dpbicse1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6XCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6e1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6Ym9keSxcbiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXMpPT5yZXMuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKChqc29uKT0+e1xuICAgICAgICAgICAgICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnd3JhcHBlci1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICBtb2RhbExvZ2luQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZUlucHV0LnZhbHVlID0gJydcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRJbnB1dC52YWx1ZSA9ICcnXG4gICAgICAgICAgICAgICAgICAgIGlmKCEhanNvbi5lcnJvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkVycm9yLnRleHRDb250ZW50ID0gJ1RoZSB1c2VybmFtZSBvciBwYXNzd29yZCBwcm92aWRlZCBpcyBpbmNvcnJlY3QnXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7Y29uc29sZS5sb2coZXJyKX0pXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgIGlmKCFuYW1lLnRyaW0oKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZUVycm9yLnRleHRDb250ZW50ID0gJypVc2VybmFtZSBmaWVsZCBpcyBlbXB0eSEnXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCFwYXNzd29yZC50cmltKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRFcnJvci50ZXh0Q29udGVudCA9ICcqUGFzc3dvcmQgZmllbGQgaXMgZW1wdHkhJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU1vZGFsU3RhdGUoKSB7XG4gICAgICAgICAgICAgICAgbG9naW5Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKVxuICAgICAgICAgICAgICAgIG1vZGFsV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICB9ICAgXG4gICAgIH1cbiAgICB9KVxufSkoKTtcblxuKGZ1bmN0aW9uIHNlYXJjaFNjcmlwdCgpe1xuICAgIHZhciBmaXJzdExvYWQgPSB0cnVlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLGZ1bmN0aW9uKCl7XG4gICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FydGljbGVzJykpe1xuICAgICAgICB2YXIgc2VhcmNoQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQjZGFzaGJvYXJkLXNlYXJjaCcpXG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXJ0aWNsZXMnKVxuICAgICAgICB2YXIgbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRlci13cmFwcGVyJylcbiAgICAgICAgdmFyIHBvc3RDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnRpY2xlLWNvdW50JylcbiAgICAgICAgc2VhcmNoRm9yQXJ0aWNsZSgnJyxwb3B1bGF0ZUFydGljbGVDb250YWluZXIpXG5cbiAgICAgICAgc2VhcmNoQmFyLm9ua2V5dXAgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJydcbiAgICAgICAgICAgIHZhciBzZWFyY2hUZXJtID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICBzZWFyY2hGb3JBcnRpY2xlKHNlYXJjaFRlcm0scG9wdWxhdGVBcnRpY2xlQ29udGFpbmVyKVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVBcnRpY2xlQ29udGFpbmVyKHJlc3VsdHMpe1xuICAgICAgICAgICAgaWYoZmlyc3RMb2FkKXtcbiAgICAgICAgICAgICAgICBwb3N0Q291bnQudGV4dENvbnRlbnQgPSByZXN1bHRzLmxlbmd0aFxuICAgICAgICAgICAgICAgIGZpcnN0TG9hZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJydcbiAgICAgICAgICAgIGlmKHJlc3VsdHMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICByZXN1bHRzLmZvckVhY2goKHBvc3QpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXJ0aWNsZS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9XCJhcnRpY2xlLXRpdGxlXCI+JHtwb3N0LnRpdGxlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cImFydGljbGUtZGVzY3JpcHRpb25cIj4ke3Bvc3QuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPVwiYXJ0aWNsZS1wdWJsaXNoZWQtZGF0ZVwiPiR7cG9zdC5wdWJsaXNoZWREYXRlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cImFydGljbGUtYXV0aG9yXCI+WW91PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdHlsaXNoLXJvdy1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL2Rhc2hib2FyZC9lZGl0b3I/aWQ9JHtwb3N0Ll9pZH1cIj48ZGl2IGNsYXNzPVwic3R5bGlzaC10YWdcIj5FRElUPC9kaXY+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZGVsZXRlLWFydGljbGVcIiBkYXRhLWFydGljbGUtaWQ9JHtwb3N0Ll9pZH0gY2xhc3M9XCJzdHlsaXNoLXRhZ1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI0U5MUU2MyFpbXBvcnRhbnQ7XCI+REVMRVRFPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGFkZExpc3RlbmVycygpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MICs9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFydGljbGUtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPVwiYXJ0aWNsZS10aXRsZVwiPk5vIHBvc3QgZm91bmQ8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVycygpe1xuXG4gICAgICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnd3JhcHBlci1hY3RpdmUnKVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0b2dnbGVBbGVydE1vZGFsU3RhdGUgKGFydGljbGVJZCA9IG51bGwpeyBcbiAgICAgICAgICAgICAgICBpZihhcnRpY2xlSWQgJiYgdHlwZW9mIGFydGljbGVJZCA9PT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWxldGluZycsYXJ0aWNsZVRvRGVsZXRlSWQpXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUFydGljbGUoYXJ0aWNsZUlkLChtZXNzYWdlKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZVRvRGVsZXRlSWQgPSAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICBhbGVydE1vZGFsV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbCcpXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxlcnQtbW9kYWwtd3JhcHBlci4tLXdyYXBwZXInKVxuICAgICAgICAgICAgdmFyIGFsZXJ0TW9kYWxDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC0tY2xvc2VCdG4nKVxuXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbFllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC15ZXMnKVxuICAgICAgICAgICAgdmFyIGFsZXJ0TW9kYWxObyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC1ubycpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWxlcnQtbW9kYWwtLWNsb3NlQnRuJylcblxuICAgICAgICAgICAgdmFyIGFydGljbGVUb0RlbGV0ZUlkID0gJydcblxuICAgICAgICAgICAgYWxlcnRNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWxlcnRNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQWxlcnRNb2RhbFN0YXRlKVxuICAgICAgICAgICAgYWxlcnRNb2RhbFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBbGVydE1vZGFsU3RhdGUpXG4gICAgICAgICAgICBhbGVydE1vZGFsTm8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBbGVydE1vZGFsU3RhdGUpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFsZXJ0TW9kYWxZZXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e3RvZ2dsZUFsZXJ0TW9kYWxTdGF0ZShhcnRpY2xlVG9EZWxldGVJZCl9KVxuICAgICAgICAgIFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2RlbGV0ZS1hcnRpY2xlJykpLmZvckVhY2goIHQgPT4gdC5vbmNsaWNrID0gKGUpPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlVG9EZWxldGVJZCA9IGUudGFyZ2V0LmRhdGFzZXQuYXJ0aWNsZUlkXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUcmlnZ2VyaW5nIG1vZGFsJyxhcnRpY2xlVG9EZWxldGVJZClcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQWxlcnRNb2RhbFN0YXRlKClcbiAgICAgICAgICAgICAgICB9KSAgICAgICAgICAgXG4gICAgICAgICAgICB9LDApXG5cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzZWFyY2hGb3JBcnRpY2xlKHNlYXJjaFRlcm0sY2Ipe1xuICAgICAgICAgICAgbG9hZGVyLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgIGZldGNoKGAvc2VhcmNoP3E9JHtzZWFyY2hUZXJtfWApXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChqc29uKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGpzb24ucmVzdWx0cylcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiBhbGVydCgnQW4gZXJyb3Igb2NjdXJyZWQnKSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUFydGljbGUoYXJ0aWNsZUlkLGNiKXtcbiAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QuYWRkKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICBmZXRjaChgL2FwaS9hcnRpY2xlL2RlbGV0ZS8ke2FydGljbGVJZH1gKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoanNvbik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICBjYihqc29uLm1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnd3JhcHBlci1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VyZWQgd2hlbiBkZWxldGluZyB0aGUgcG9zdCcpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICB9XG4gICAgfSlcbn0pKClcblxuXG4oZnVuY3Rpb24gc2lkZWJhclNjcmlwdCgpIHtcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpKXtcbiAgICAgICAgbGV0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpXG4gICAgICAgIGxldCBzaWRlYmFyV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyLXdyYXBwZXIuLS13cmFwcGVyJylcbiAgICBcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci0tdHJpZ2dlcicpKXtcbiAgICAgICAgbGV0IHNpZGViYXJUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXItLXRyaWdnZXInKVxuICAgICAgICBzaWRlYmFyVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdG9nZ2xlU2lkZWJhclN0YXRlKVxuICAgICAgICBzaWRlYmFyV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdG9nZ2xlU2lkZWJhclN0YXRlKVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhclN0YXRlKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoJ3NpZGViYXItYWN0aXZlJylcbiAgICAgICAgc2lkZWJhcldyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgnd3JhcHBlci1hY3RpdmUnKVxuICAgIH1cbiAgICB9XG4gICAgfVxufSkoKTtcbiJdfQ==
