"use strict";window.addEventListener("DOMContentLoaded",function(){if(document.querySelector("header")){var e=function(){300<window.scrollY&&"/"===window.location.pathname&&!window.location.search?t.setAttribute("style","background:black;box-shadow:0 0 10px black"):window.location.search?t.setAttribute("style","background:black;box-shadow:0 0 10px black"):t.setAttribute("style","background:transparent;box-shadow:0 0 10px transparent")},t=document.querySelector("header");window.location.search&&t.setAttribute("style","background:black;box-shadow:0 0 10px black"),"/"!=window.location.pathname?(window.removeEventListener("scroll",e),t.setAttribute("style","background:black;box-shadow:0 0 10px black")):window.addEventListener("scroll",e,!1)}}),document.querySelector(".hero-scroll-down")&&document.querySelector(".hero-scroll-down").addEventListener("click",function(){window.scrollBy({top:window.innerHeight-100,left:0,behavior:"smooth"})}),window.addEventListener("DOMContentLoaded",function(){if(document.querySelector("#login-modal-trigger")){var t=function(){var e=r.value,t=i.value;if(u.setAttribute("disabled",!0),l.textContent="",r.value.trim()&&i.value.trim()){var o=JSON.stringify({name:e,password:t});fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:o}).then(function(e){return e.json()}).then(function(e){u.setAttribute("disabled",!1),r.value="",i.value="",e.error?l.textContent="The username or password provided is incorrect":window.location.href="/"}).catch(function(e){console.log(e)})}else e.trim()?t.trim()||(a.textContent="*Password field is empty!"):c.textContent="*Username field is empty!"},e=function(){o.classList.toggle("modal-active"),n.classList.toggle("wrapper-active")},o=document.querySelector("#login-modal"),n=document.querySelector("#login-modal-wrapper.--wrapper"),r=document.querySelector("#login-modal--username"),c=document.querySelector("#login-modal--username-error"),i=document.querySelector("#login-modal--password"),a=document.querySelector("#login-modal--password-error"),l=document.querySelector("#login-modal--login-error"),d=document.querySelector("#login-modal--button"),s=document.querySelector("#login-modal-trigger"),u=document.querySelector(".modal--close-btn");o.addEventListener("click",function(e){return e.stopPropagation()}),s.addEventListener("click",e),u.addEventListener("click",e),n.addEventListener("click",e),d.addEventListener("click",t),n.classList.contains("wrapper-active")?window.addEventListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&d.addEventListener("click",t)}):window.removeListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&d.addEventListener("click",t)})}}),function(){var i=!0;window.addEventListener("DOMContentLoaded",function(){if(document.querySelector("#articles")){var o=function(e){i&&(c.textContent=e.length,i=!1),e.length?(e.forEach(function(e){r.innerHTML+='\n                    <div class="article-item">\n                            <p id="article-title">'.concat(e.title,'</p>\n                            <p id="article-description">').concat(e.description,'</p>\n                            <p id="article-published-date">').concat(e.publishedDate,'</p>\n                            <p id="article-author">You</p>\n                            <div class="stylish-row-group">\n                                <a href="/dashboard/editor"><div class="stylish-tag">EDIT</div></a>\n                                <div id="delete-article" data-article-id=').concat(e._id,' class="stylish-tag" style="background-color: #E91E63!important;">DELETE</div>\n                            </div>\n                </div>\n                    ')}),t()):(r.innerHTML+='\n                    <div class="article-item">\n                            <p id="article-title">No post found</p>\n                </div>',l.classList.remove("wrapper-active"))},t=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;o.classList.toggle("modal-active"),n.classList.toggle("wrapper-active"),e&&(console.log("Deleting",i),a(e,function(e){i="",alert(e),window.location.reload()}))}l.classList.remove("wrapper-active");var o=document.querySelector("#alert-modal"),n=document.querySelector("#alert-modal-wrapper.--wrapper"),e=document.querySelector("#alert-modal--closeBtn"),r=document.querySelector("#alert-modal-yes"),c=document.querySelector("#alert-modal-no"),i=(e=document.querySelector("#alert-modal--closeBtn"),"");o.addEventListener("click",function(e){return e.stopPropagation()}),e.addEventListener("click",t),n.addEventListener("click",t),c.addEventListener("click",t),r.addEventListener("click",function(){t(i)}),setTimeout(function(){Array.from(document.querySelectorAll("#delete-article")).forEach(function(e){return e.onclick=function(e){i=e.target.dataset.articleId,console.log("Triggering modal",i),t()}})},0)},n=function(e,t){fetch("/search?q=".concat(e)).then(function(e){return e.json()}).then(function(e){t(e.results)}).catch(function(e){return console.log(e)})},a=function(e,t){fetch("/api/article/delete/".concat(e)).then(function(e){return e.json()}).then(function(e){t(e.message)}).catch(function(e){return console.log(e)})},e=document.querySelector("input#dashboard-search"),r=document.querySelector("#articles"),l=document.querySelector("#loader-wrapper"),c=document.querySelector("#article-count");n("",o),e.onkeyup=function(e){l.classList.add("wrapper-active"),r.innerHTML="";var t=e.target.value;n(t,o)}}})}()(function(){if(document.querySelector(".sidebar")){var t=document.querySelector(".sidebar"),o=document.querySelector("#sidebar-wrapper.--wrapper");if(document.querySelector(".sidebar--trigger")){var e=function(e){e.stopPropagation(),t.classList.toggle("sidebar-active"),o.classList.toggle("wrapper-active")};document.querySelector(".sidebar--trigger").addEventListener("click",e),o.addEventListener("click",e)}}})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJoZWFkZXJTY3JpcHQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwiaGVhZGVyIiwic2Nyb2xsWSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzZWFyY2giLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxIYW5kbGVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNjcm9sbEJ5IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJsZWZ0IiwiYmVoYXZpb3IiLCJzdWJtaXRDcmVkZW50aWFscyIsImNvbnNvbGUiLCJsb2ciLCJ1c2VybmFtZUlucHV0IiwidmFsdWUiLCJwYXNzd29yZCIsInBhc3N3b3JkSW5wdXQiLCJ1c2VybmFtZUVycm9yIiwibW9kYWxDbG9zZUJ0biIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJib2R5IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiY2xhc3NMaXN0IiwibW9kYWxXcmFwcGVyIiwidG9nZ2xlIiwidGhlbiIsImpzb24iLCJsb2dpbkVycm9yIiwibG9naW5Nb2RhbFRyaWdnZXIiLCJ0b2dnbGVNb2RhbFN0YXRlIiwic3RvcFByb3BhZ2F0aW9uIiwibG9naW5Nb2RhbCIsImxvZ2luTW9kYWxTY3JpcHQiLCJwYXNzd29yZEVycm9yIiwiSlNPTiIsImUiLCJjb250YWlucyIsIm1vZGFsTG9naW5CdXR0b24iLCJrZXlDb2RlIiwiZXJyb3IiLCJyZW1vdmVMaXN0ZW5lciIsImZpcnN0TG9hZCIsInJlc3VsdHMiLCJwb3N0Q291bnQiLCJsZW5ndGgiLCJmb3JFYWNoIiwicG9zdCIsImNvbnRhaW5lciIsImlubmVySFRNTCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwdWJsaXNoZWREYXRlIiwiX2lkIiwiYXJ0aWNsZUlkIiwiYWxlcnRNb2RhbFdyYXBwZXIiLCJkZWxldGVBcnRpY2xlIiwiYWRkTGlzdGVuZXJzIiwiYWxlcnRNb2RhbCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImFsZXJ0TW9kYWxDbG9zZUJ0biIsImFsZXJ0TW9kYWxObyIsImFydGljbGVUb0RlbGV0ZUlkIiwibWVzc2FnZSIsInJlbG9hZCIsImxvYWRlciIsInJlbW92ZSIsInRvZ2dsZUFsZXJ0TW9kYWxTdGF0ZSIsInNldFRpbWVvdXQiLCJhbGVydE1vZGFsWWVzIiwidGFyZ2V0Iiwic2VhcmNoRm9yQXJ0aWNsZSIsInNlYXJjaFRlcm0iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwidCIsIm9uY2xpY2siLCJkYXRhc2V0IiwiY2IiLCJlcnIiLCJyZXMiLCJwb3B1bGF0ZUFydGljbGVDb250YWluZXIiLCJvbmtleXVwIiwiYWRkIiwic2VhcmNoQmFyIiwic2VhcmNoU2NyaXB0Iiwic2lkZWJhcldyYXBwZXIiLCJ0b2dnbGVTaWRlYmFyU3RhdGUiLCJzaWRlYmFyVHJpZ2dlciJdLCJtYXBwaW5ncyI6ImFBQ0NBLE9BQVNDLGlCQUFlLG1CQUFBLFdBQ2YsR0FBQ0MsU0FBQUEsY0FBaUIsVUFBeEIsQ0FBQSxJQWEyQkMsRUFBUEMsV0FDRyxJQUFBSixPQUFBSyxTQUFBLE1BQUFMLE9BQUFNLFNBQUFDLFdBQUFQLE9BQUFNLFNBQUFFLE9BQ0lMLEVBQUFBLGFBQVAsUUFBNkIsOENBRXBDSCxPQUFBTSxTQUFBRSxPQWhCMkJKLEVBQUFELGFBQUEsUUFBQSw4Q0FDbkJNLEVBQVNDLGFBQWMsUUFBcEMsMkRBRE9OLEVBQUNNLFNBQWNBLGNBQVUsVUFRbEJWLE9BQUNLLFNBQVBHLFFBQ01KLEVBQUNELGFBQWEsUUFBUyw4Q0FVTCxLQUE1QkgsT0FBT00sU0FBU0MsVUFBVlAsT0FBQ00sb0JBQTBCLFNBQUFLLEdBQzFCQyxFQUFBQSxhQUFvQixRQUFVRCwrQ0FFbENYLE9BQUFFLGlCQUFBLFNBQUFTLEdBQUEsTUFTVkYsU0FBU0MsY0FBYyxzQkFDUEQsU0FBU0MsY0FBYyxxQkFDN0JSLGlCQUFpQixRQUFTLFdBQ3JDRixPQUFPYSxTQUFT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TUFHbkNyQyxFQUFKLFNBQXlCOUMsRUFBQUEsR0FFekIwRSxNQUFBQSx1QkFBQUEsT0FBb0JXLElBK0ZYekQsS0FBSyxTQUFBd0QsR0FBRyxPQUFJQSxFQUFJdkQsU0E3RmZ5RCxLQUFVLFNBQUF6RCxHQUNoQnFELEVBQWlCSyxFQUFJckIsV0FDWGYsTUFBVixTQUFBZ0MsR0FBQSxPQUFBMUUsUUFBQUMsSUFBQXlFLE1BOURRSyxFQUFHekYsU0FBaUJDLGNBQUEsMEJBQ2hCd0MsRUFBQUEsU0FBaUJoRCxjQUFpQixhQUNyQzRFLEVBQUFyRSxTQUFBQyxjQUFBLG1CQUpMOEMsRUFBQS9DLFNBQUFDLGNBQUEsa0JBK0NWMEUsRUFBQSxHQUFBVyxHQTNFTkcsRUFBQUYsUUFBQSxTQUFBaEQsR0EyRlk4QixFQUFPM0MsVUFBVThELElBQUksa0JBWnZCRSxFQUFUdEMsVUFBdUIsR0FDaEJQLElBQVMrQixFQUFickMsRUFBQW1DLE9BQUE3RCxNQUNPcEIsRUFBaUJtRixFQUF4QlUsT0F0RFMsRUFBQSxDQXVLVCxXQUNJLEdBQUF0RixTQUFXQyxjQUFZQSxZQUFjLENBQ2pDMEYsSUFBQUEsRUFBYzNGLFNBQUdBLGNBQVNDLFlBQTFCMEYsRUFBaUIzRixTQUFTQyxjQUFjLDhCQUVELEdBQUFELFNBS3RDNEYsY0FMc0MscUJBS3RDQSxDQUFBQSxJQUFBQSxFQUFULFNBQTRCckQsR0FKeEJBLEVBQUlzRCxrQkFDSkEsRUFBQUEsVUFBZXBHLE9BQUFBLGtCQUNma0csRUFBZWxHLFVBQUFBLE9BQWlCLG1CQUdoQ08sU0FBQUMsY0FBQSxxQkFDUXlCLGlCQUFpQixRQUFBa0UsR0FDekJELEVBQWVqRSxpQkFBaUIsUUFBQWtFLE1BbkwzQiIsImZpbGUiOiJjdXN0b20uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbihmdW5jdGlvbiBoZWFkZXJTY3JpcHQoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpKXtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKVxuXG4gICAgICAgICAgICBpZiAoISF3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDpibGFjaztib3gtc2hhZG93OjAgMCAxMHB4IGJsYWNrJylcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gMzAwICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy8nICYmICF3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2JhY2tncm91bmQ6YmxhY2s7Ym94LXNoYWRvdzowIDAgMTBweCBibGFjaycpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDpibGFjaztib3gtc2hhZG93OjAgMCAxMHB4IGJsYWNrJylcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym94LXNoYWRvdzowIDAgMTBweCB0cmFuc3BhcmVudCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICE9ICcvJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyKVxuICAgICAgICAgICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2JhY2tncm91bmQ6YmxhY2s7Ym94LXNoYWRvdzowIDAgMTBweCBibGFjaycpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBzY3JvbGxMaXN0ZW5lciA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyLCBmYWxzZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59KSgpO1xuXG5cbihmdW5jdGlvbiBoZXJvU2NyaXB0KCkge1xuICAgIGlmKCEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm8tc2Nyb2xsLWRvd24nKSl7XG4gICAgICAgIGxldCBzY3JvbGxEb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm8tc2Nyb2xsLWRvd24nKVxuICAgICAgICBzY3JvbGxEb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoeyB0b3A6IHdpbmRvdy5pbm5lckhlaWdodCAtIDEwMCwgbGVmdDogMCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pXG4gICAgfSlcbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24gbG9naW5Nb2RhbFNjcmlwdCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsZnVuY3Rpb24oKXtcbiAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLXRyaWdnZXInKSl7XG4gICAgICAgIGxldCBsb2dpbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsJylcbiAgICAgICAgICAgIGxldCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtd3JhcHBlci4tLXdyYXBwZXInKVxuICAgICAgICAgICAgbGV0IHVzZXJuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtLXVzZXJuYW1lJylcbiAgICAgICAgICAgIGxldCB1c2VybmFtZUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLS11c2VybmFtZS1lcnJvcicpXG4gICAgICAgICAgICBsZXQgcGFzc3dvcmRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC0tcGFzc3dvcmQnKVxuICAgICAgICAgICAgbGV0IHBhc3N3b3JkRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtLXBhc3N3b3JkLWVycm9yJylcbiAgICAgICAgICAgIGxldCBsb2dpbkVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLS1sb2dpbi1lcnJvcicpXG4gICAgICAgICAgICBsZXQgbW9kYWxMb2dpbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC0tYnV0dG9uJylcbiAgICAgICAgICAgIGxldCBsb2dpbk1vZGFsVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC10cmlnZ2VyJylcbiAgICAgICAgICAgIGxldCBtb2RhbENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLS1jbG9zZS1idG4nKVxuICAgICAgICBcbiAgICAgICAgICAgIGxvZ2luTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpXG4gICAgICAgICAgICBsb2dpbk1vZGFsVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGFsU3RhdGUpXG4gICAgICAgICAgICBtb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTW9kYWxTdGF0ZSlcbiAgICAgICAgICAgIG1vZGFsV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGFsU3RhdGUpXG4gICAgICAgICAgICBtb2RhbExvZ2luQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3VibWl0Q3JlZGVudGlhbHMpXG5cbiAgICAgICAgICAgIGlmKG1vZGFsV3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXItYWN0aXZlJykpe1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgICAgICBpZihlLmtleUNvZGUgPT09IDEzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsTG9naW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdWJtaXRDcmVkZW50aWFscylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlTGlzdGVuZXIoJ2tleWRvd24nLGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMTMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxMb2dpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN1Ym1pdENyZWRlbnRpYWxzKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWJtaXRDcmVkZW50aWFscygpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsdWVcbiAgICAgICAgICAgICAgICBsZXQgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbHVlXG4gICAgICAgICAgICAgICAgbW9kYWxDbG9zZUJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJyx0cnVlKTtcbiAgICAgICAgICAgICAgICBsb2dpbkVycm9yLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgaWYodXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCkgJiYgcGFzc3dvcmRJbnB1dC52YWx1ZS50cmltKCkpe1xuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoKHtuYW1lLHBhc3N3b3JkfSkpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmV0Y2goJy9sb2dpbicse1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6XCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6e1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6Ym9keSxcbiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXMpPT5yZXMuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKChqc29uKT0+e1xuICAgICAgICAgICAgICAgICAgICBtb2RhbENsb3NlQnRuLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZUlucHV0LnZhbHVlID0gJydcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRJbnB1dC52YWx1ZSA9ICcnXG4gICAgICAgICAgICAgICAgICAgIGlmKCEhanNvbi5lcnJvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkVycm9yLnRleHRDb250ZW50ID0gJ1RoZSB1c2VybmFtZSBvciBwYXNzd29yZCBwcm92aWRlZCBpcyBpbmNvcnJlY3QnXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7Y29uc29sZS5sb2coZXJyKX0pXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFuYW1lLnRyaW0oKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZUVycm9yLnRleHRDb250ZW50ID0gJypVc2VybmFtZSBmaWVsZCBpcyBlbXB0eSEnXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCFwYXNzd29yZC50cmltKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRFcnJvci50ZXh0Q29udGVudCA9ICcqUGFzc3dvcmQgZmllbGQgaXMgZW1wdHkhJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU1vZGFsU3RhdGUoKSB7XG4gICAgICAgICAgICAgICAgbG9naW5Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKVxuICAgICAgICAgICAgICAgIG1vZGFsV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICB9ICAgXG4gICAgIH1cbiAgICB9KVxufSkoKTtcblxuKGZ1bmN0aW9uIHNlYXJjaFNjcmlwdCgpe1xuICAgIHZhciBmaXJzdExvYWQgPSB0cnVlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLGZ1bmN0aW9uKCl7XG4gICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FydGljbGVzJykpe1xuICAgICAgICB2YXIgc2VhcmNoQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQjZGFzaGJvYXJkLXNlYXJjaCcpXG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXJ0aWNsZXMnKVxuICAgICAgICB2YXIgbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvYWRlci13cmFwcGVyJylcbiAgICAgICAgdmFyIHBvc3RDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnRpY2xlLWNvdW50JylcbiAgICAgICAgXG4gICAgICAgIHNlYXJjaEZvckFydGljbGUoJycscG9wdWxhdGVBcnRpY2xlQ29udGFpbmVyKVxuXG4gICAgICAgIHNlYXJjaEJhci5vbmtleXVwID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LmFkZCgnd3JhcHBlci1hY3RpdmUnKVxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnXG4gICAgICAgICAgICB2YXIgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgc2VhcmNoRm9yQXJ0aWNsZShzZWFyY2hUZXJtLHBvcHVsYXRlQXJ0aWNsZUNvbnRhaW5lcilcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlQXJ0aWNsZUNvbnRhaW5lcihyZXN1bHRzKXtcbiAgICAgICAgICAgIGlmKGZpcnN0TG9hZCl7XG4gICAgICAgICAgICAgICAgcG9zdENvdW50LnRleHRDb250ZW50ID0gcmVzdWx0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICBmaXJzdExvYWQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocmVzdWx0cy5sZW5ndGgpe1xuICAgICAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaCgocG9zdCk9PntcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcnRpY2xlLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cImFydGljbGUtdGl0bGVcIj4ke3Bvc3QudGl0bGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPVwiYXJ0aWNsZS1kZXNjcmlwdGlvblwiPiR7cG9zdC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9XCJhcnRpY2xlLXB1Ymxpc2hlZC1kYXRlXCI+JHtwb3N0LnB1Ymxpc2hlZERhdGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPVwiYXJ0aWNsZS1hdXRob3JcIj5Zb3U8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0eWxpc2gtcm93LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvZGFzaGJvYXJkL2VkaXRvclwiPjxkaXYgY2xhc3M9XCJzdHlsaXNoLXRhZ1wiPkVESVQ8L2Rpdj48L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJkZWxldGUtYXJ0aWNsZVwiIGRhdGEtYXJ0aWNsZS1pZD0ke3Bvc3QuX2lkfSBjbGFzcz1cInN0eWxpc2gtdGFnXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjRTkxRTYzIWltcG9ydGFudDtcIj5ERUxFVEU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJzKClcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXJ0aWNsZS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9XCJhcnRpY2xlLXRpdGxlXCI+Tm8gcG9zdCBmb3VuZDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYWRkTGlzdGVuZXJzKCl7XG5cbiAgICAgICAgICAgIGxvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCd3cmFwcGVyLWFjdGl2ZScpXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUFsZXJ0TW9kYWxTdGF0ZSAoYXJ0aWNsZUlkID0gbnVsbCl7XG4gICAgICAgICAgICAgICAgYWxlcnRNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKVxuICAgICAgICAgICAgICAgIGFsZXJ0TW9kYWxXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZihhcnRpY2xlSWQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGVsZXRpbmcnLGFydGljbGVUb0RlbGV0ZUlkKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVBcnRpY2xlKGFydGljbGVJZCwobWVzc2FnZSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGVUb0RlbGV0ZUlkID0gJydcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsJylcbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC13cmFwcGVyLi0td3JhcHBlcicpXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsLS1jbG9zZUJ0bicpXG5cbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsWWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsLXllcycpXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbE5vID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsLW5vJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFsZXJ0TW9kYWxDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC0tY2xvc2VCdG4nKVxuXG4gICAgICAgICAgICB2YXIgYXJ0aWNsZVRvRGVsZXRlSWQgPSAnJ1xuXG4gICAgICAgICAgICBhbGVydE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhbGVydE1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBbGVydE1vZGFsU3RhdGUpXG4gICAgICAgICAgICBhbGVydE1vZGFsV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFsZXJ0TW9kYWxTdGF0ZSlcbiAgICAgICAgICAgIGFsZXJ0TW9kYWxOby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFsZXJ0TW9kYWxTdGF0ZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWxlcnRNb2RhbFllcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57dG9nZ2xlQWxlcnRNb2RhbFN0YXRlKGFydGljbGVUb0RlbGV0ZUlkKX0pXG4gICAgICAgICAgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZGVsZXRlLWFydGljbGUnKSkuZm9yRWFjaCggdCA9PiB0Lm9uY2xpY2sgPSAoZSk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVUb0RlbGV0ZUlkID0gZS50YXJnZXQuZGF0YXNldC5hcnRpY2xlSWRcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RyaWdnZXJpbmcgbW9kYWwnLGFydGljbGVUb0RlbGV0ZUlkKVxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVBbGVydE1vZGFsU3RhdGUoKVxuICAgICAgICAgICAgICAgIH0pICAgICAgICAgICBcbiAgICAgICAgICAgIH0sMClcblxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNlYXJjaEZvckFydGljbGUoc2VhcmNoVGVybSxjYil7XG4gICAgICAgICAgICBmZXRjaChgL3NlYXJjaD9xPSR7c2VhcmNoVGVybX1gKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoanNvbik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGpzb24ucmVzdWx0cylcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWxldGVBcnRpY2xlKGFydGljbGVJZCxjYil7XG4gICAgICAgICAgICBmZXRjaChgL2FwaS9hcnRpY2xlL2RlbGV0ZS8ke2FydGljbGVJZH1gKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoanNvbik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGpzb24ubWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAgIH1cbiAgICAgICB9XG4gICAgfSlcbn0pKClcblxuXG4oZnVuY3Rpb24gc2lkZWJhclNjcmlwdCgpIHtcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpKXtcbiAgICAgICAgbGV0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpXG4gICAgICAgIGxldCBzaWRlYmFyV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyLXdyYXBwZXIuLS13cmFwcGVyJylcbiAgICBcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci0tdHJpZ2dlcicpKXtcbiAgICAgICAgbGV0IHNpZGViYXJUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXItLXRyaWdnZXInKVxuICAgICAgICBzaWRlYmFyVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdG9nZ2xlU2lkZWJhclN0YXRlKVxuICAgICAgICBzaWRlYmFyV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdG9nZ2xlU2lkZWJhclN0YXRlKVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhclN0YXRlKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoJ3NpZGViYXItYWN0aXZlJylcbiAgICAgICAgc2lkZWJhcldyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgnd3JhcHBlci1hY3RpdmUnKVxuICAgIH1cbiAgICB9XG4gICAgfVxufSkoKTtcbiJdfQ==
