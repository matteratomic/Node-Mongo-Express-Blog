"use strict";window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("header");function t(){300<window.scrollY&&"/"===window.location.pathname&&!window.location.search?e.setAttribute("style","background:black;box-shadow:0 0 10px black"):window.location.search?e.setAttribute("style","background:black;box-shadow:0 0 10px black"):e.setAttribute("style","background:transparent;box-shadow:0 0 10px transparent")}window.location.search&&e.setAttribute("style","background:black;box-shadow:0 0 10px black"),"/"!=window.location.pathname?(window.removeEventListener("scroll",t),e.setAttribute("style","background:black;box-shadow:0 0 10px black")):window.addEventListener("scroll",t,!1)}),document.querySelector(".hero-scroll-down")&&document.querySelector(".hero-scroll-down").addEventListener("click",function(){window.scrollBy({top:window.innerHeight-100,left:0,behavior:"smooth"})}),window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#login-modal"),t=document.querySelector("#login-modal-wrapper.--wrapper"),n=document.querySelector("#login-modal--username"),r=document.querySelector("#login-modal--username-error"),c=document.querySelector("#login-modal--password"),a=document.querySelector("#login-modal--password-error"),i=document.querySelector("#login-modal--login-error"),o=document.querySelector("#login-modal--button"),l=document.querySelector("#login-modal-trigger"),d=document.querySelector(".modal--close-btn");function s(){var e=n.value,t=c.value;if(d.setAttribute("disabled",!0),i.textContent="",n.value.trim()&&c.value.trim()){var o=JSON.stringify({name:e,password:t});fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:o}).then(function(e){return e.json()}).then(function(e){d.setAttribute("disabled",!1),n.value="",c.value="",e.error?i.textContent="The username or password provided is incorrect":window.location.href="/"}).catch(function(e){console.log(e)})}else e.trim()?t.trim()||(a.textContent="*Password field is empty!"):r.textContent="*Username field is empty!"}function u(){e.classList.toggle("modal-active"),t.classList.toggle("wrapper-active")}e.addEventListener("click",function(e){return e.stopPropagation()}),l.addEventListener("click",u),d.addEventListener("click",u),t.addEventListener("click",u),o.addEventListener("click",s),t.classList.contains("wrapper-active")?window.addEventListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&o.addEventListener("click",s)}):window.removeListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&o.addEventListener("click",s)})}),(void window.addEventListener("DOMContentLoaded",function(){if(document.querySelector(".dashboard")){var o=function(e){e.forEach(function(e){r.innerHTML+='\n                    <div class="article-item">\n                            <p id="article-title">'.concat(e.title,'</p>\n                            <p id="article-description">').concat(e.description,'</p>\n                            <p id="article-published-date">').concat(e.publishedDate,'</p>\n                            <p id="article-author">You</p>\n                            <div class="stylish-row-group">\n                                <a href="/dashboard/editor"><div class="stylish-tag">EDIT</div></a>\n                                <div id="delete-article" data-article-id=').concat(e._id,' class="stylish-tag" style="background-color: #E91E63!important;">DELETE</div>\n                            </div>\n                </div>\n                    ')}),t()},t=function(){l.classList.remove("wrapper-active");var t=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;o.classList.toggle("modal-active"),n.classList.toggle("wrapper-active"),e&&(console.log("Deleting",a),i(e,function(e){a="",alert(e),window.location.reload()}))},o=document.querySelector("#alert-modal"),n=document.querySelector("#alert-modal-wrapper.--wrapper"),e=document.querySelector("#alert-modal--closeBtn"),r=document.querySelector("#alert-modal-yes"),c=document.querySelector("#alert-modal-no"),a=(e=document.querySelector("#alert-modal--closeBtn"),"");o.addEventListener("click",function(e){return e.stopPropagation()}),e.addEventListener("click",t),n.addEventListener("click",t),c.addEventListener("click",t),r.addEventListener("click",function(){t(a)}),setTimeout(function(){Array.from(document.querySelectorAll("#delete-article")).forEach(function(e){return e.onclick=function(e){a=e.target.dataset.articleId,console.log("Triggering modal",a),t()}})},0)},n=function(e,t){fetch("/search?q=".concat(e)).then(function(e){return e.json()}).then(function(e){t(e.results)}).catch(function(e){return console.log(e)})},i=function(e,t){fetch("/api/article/delete/".concat(e)).then(function(e){return e.json()}).then(function(e){t(e.message)}).catch(function(e){return console.log(e)})},e=document.querySelector("input#dashboard-search"),r=document.querySelector("#articles"),l=document.querySelector("#loader-wrapper");n("",o),e.onkeyup=function(e){l.classList.add("wrapper-active"),r.innerHTML="";var t=e.target.value;n(t,o)}}}))(function(){var e=document.querySelector(".alert-panel");document.querySelector(".alert-panel--close").addEventListener("click",function(){e.classList.add("alert-panel-inactive")})})()(function(){if(document.querySelector(".sidebar")){var t=document.querySelector(".sidebar"),o=document.querySelector("#sidebar-wrapper.--wrapper");if(document.querySelector(".sidebar--trigger")){var e=function(e){e.stopPropagation(),t.classList.toggle("sidebar-active"),o.classList.toggle("wrapper-active")};document.querySelector(".sidebar--trigger").addEventListener("click",e),o.addEventListener("click",e)}}})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJoZWFkZXJTY3JpcHQiLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbEhhbmRsZXIiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic2VhcmNoIiwiaGVhZGVyIiwic2Nyb2xsWSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsInNjcm9sbEJ5IiwidG9wIiwiaW5uZXJIZWlnaHQiLCJsZWZ0IiwiYmVoYXZpb3IiLCJsb2dpbk1vZGFsIiwibG9naW5Nb2RhbFNjcmlwdCIsIm1vZGFsV3JhcHBlciIsInVzZXJuYW1lSW5wdXQiLCJ1c2VybmFtZUVycm9yIiwicGFzc3dvcmRJbnB1dCIsInBhc3N3b3JkRXJyb3IiLCJsb2dpbkVycm9yIiwiZSIsInN1Ym1pdENyZWRlbnRpYWxzIiwibW9kYWxMb2dpbkJ1dHRvbiIsInBhc3N3b3JkIiwidmFsdWUiLCJtb2RhbENsb3NlQnRuIiwidGV4dENvbnRlbnQiLCJ0cmltIiwic3RyaW5naWZ5IiwibmFtZSIsIkNvbnRlbnQtVHlwZSIsIkpTT04iLCJyZXMiLCJqc29uIiwiZXJyb3IiLCJib2R5IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwidG9nZ2xlTW9kYWxTdGF0ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxvZ2luTW9kYWxUcmlnZ2VyIiwic3RvcFByb3BhZ2F0aW9uIiwiY29udGFpbnMiLCJrZXlDb2RlIiwicmVtb3ZlTGlzdGVuZXIiLCJjb250YWluZXIiLCJyZXN1bHRzIiwiZm9yRWFjaCIsInBvc3QiLCJpbm5lckhUTUwiLCJjb25jYXQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHVibGlzaGVkRGF0ZSIsIl9pZCIsImRlbGV0ZUFydGljbGUiLCJsb2FkZXIiLCJyZW1vdmUiLCJ0b2dnbGVBbGVydE1vZGFsU3RhdGUiLCJhcnRpY2xlSWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJhbGVydE1vZGFsIiwiYWxlcnRNb2RhbFdyYXBwZXIiLCJhbGVydE1vZGFsWWVzIiwiYWxlcnRNb2RhbE5vIiwiYWxlcnRNb2RhbENsb3NlQnRuIiwiYXJ0aWNsZVRvRGVsZXRlSWQiLCJyZWxvYWQiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNlYXJjaEZvckFydGljbGUiLCJzZWFyY2hUZXJtIiwiZmV0Y2giLCJ0aGVuIiwiQXJyYXkiLCJ0Iiwib25jbGljayIsInRhcmdldCIsImRhdGFzZXQiLCJjYiIsInBvcHVsYXRlQXJ0aWNsZUNvbnRhaW5lciIsIm9ua2V5dXAiLCJhZGQiLCJtZXNzYWdlIiwic2VhcmNoQmFyIiwic2VhcmNoU2NyaXB0IiwiYWxlcnRQYW5lbCIsInNpZGViYXJXcmFwcGVyIiwic2lkZWJhciIsInNpZGViYXJUcmlnZ2VyIiwidG9nZ2xlU2lkZWJhclN0YXRlIl0sIm1hcHBpbmdzIjoiYUFDQ0EsT0FBU0MsaUJBQWUsbUJBQUEsV0FDZixJQUFDQyxFQUFBQSxTQUFpQkMsY0FBeEIsVUFPSSxTQUFTQyxJQUFnQixJQUFoQkEsT0FBQUEsU0FBZ0IsTUFBQUosT0FBQUssU0FBQUMsV0FBQU4sT0FBQUssU0FBQUUsT0FDWEMsRUFBQ0MsYUFBaUJULFFBQU9LLDhDQUU1QkwsT0FBQUssU0FBQUUsT0FDU0MsRUFBQ0gsYUFBaUIsUUFBQSw4Q0FFdkJHLEVBQUFFLGFBQUEsUUFBQSwwREFWVFYsT0FBT0ssU0FBU0UsUUFBaEJQLEVBQU9LLGFBQWIsUUFBOEIsOENBZ0JFLEtBQTVCTCxPQUFPSyxTQUFTQyxVQUFoQk4sT0FBT0ssb0JBQVgsU0FBcUNELEdBQzNCSSxFQUFDRyxhQUFQLFFBQUEsK0NBRUdYLE9BQUFFLGlCQUFBLFNBQUFFLEdBQUEsS0FRTlEsU0FBU1QsY0FBYyxzQkFDUFMsU0FBU1QsY0FBYyxxQkFDN0JELGlCQUFpQixRQUFTLFdBQ3JDRixPQUFPYSxTQUFTLENBQUFDLElBQUFkLE9BQUFlLFlBQUEsSUFBQUMsS0FBQSxFQUFBQyxTQUFB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QUFtQjNDLGNBQUEsYUFDeEJlLEVBQVc2QixTQUFVQyxjQUFPLG1CQUM1QjVCLEVBQWEyQixHQUFiNEMsR0F4RVpJLEVBQUFILFFBQUEsU0FBQWxFLEdBREp1QyxFQUFBbEIsVUFBQThDLElBQUEsa0JBeUZZdkMsRUFBVUksVUFBWSxHQVZ4QnNDLElBQUFBLEVBQWN0RSxFQUFBOEQsT0FBQTFELE1BQ2I1QixFQUFpQmdGLEVBQXhCUyxRQURKLFdBb0dJLElBQUlNLEVBQWFyRixTQUFTVCxjQUFjLGdCQUNmUyxTQUFTVCxjQUFjLHVCQUM3QkQsaUJBQWlCLFFBRXBDLFdBQ0krRixFQUFXbEQsVUFBYzhDLElBQUEsMkJBckhaLEVBQUEsQ0EySGIsV0FDQSxHQUFBakYsU0FBSXNGLGNBQWlCdEYsWUFBU1QsQ0FEOUIsSUFBSWdHLEVBQVV2RixTQUFTVCxjQUFjLFlBR3RDUyxFQUFTVCxTQUFjQSxjQUExQiw4QkFNSXVCLEdBQUFBLFNBQUV3QixjQUFGLHFCQUFBLENBQUEsSUFMSWtELEVBQUosU0FBcUJ4RixHQUNyQndGLEVBQUFBLGtCQUNBRixFQUFBQSxVQUFlaEcsT0FBQUEsa0JBT2xCZ0csRUFBQW5ELFVBQUFDLE9BQUEsbUJBSHFCQSxTQUFPN0MsY0FBekIscUJBQ2U0QyxpQkFBaUIsUUFBQXNELEdBUldILEVBQUFoRyxpQkFBQSxRQUFBbUcsTUE5SDlCIiwiZmlsZSI6ImN1c3RvbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uIGhlYWRlclNjcmlwdCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpXG5cbiAgICAgICAgaWYgKCEhd2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xuICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDpibGFjaztib3gtc2hhZG93OjAgMCAxMHB4IGJsYWNrJylcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPiAzMDAgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnLycgJiYgIXdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdiYWNrZ3JvdW5kOmJsYWNrO2JveC1zaGFkb3c6MCAwIDEwcHggYmxhY2snKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoISF3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2JhY2tncm91bmQ6YmxhY2s7Ym94LXNoYWRvdzowIDAgMTBweCBibGFjaycpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3gtc2hhZG93OjAgMCAxMHB4IHRyYW5zcGFyZW50JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICE9ICcvJykge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpXG4gICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdiYWNrZ3JvdW5kOmJsYWNrO2JveC1zaGFkb3c6MCAwIDEwcHggYmxhY2snKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHNjcm9sbExpc3RlbmVyID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIsIGZhbHNlKVxuICAgICAgICB9XG4gICAgfSlcbn0pKCk7XG5cblxuKGZ1bmN0aW9uIGhlcm9TY3JpcHQoKSB7XG4gICAgaWYoISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1zY3JvbGwtZG93bicpKXtcbiAgICAgICAgbGV0IHNjcm9sbERvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1zY3JvbGwtZG93bicpXG4gICAgICAgIHNjcm9sbERvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSh7IHRvcDogd2luZG93LmlubmVySGVpZ2h0IC0gMTAwLCBsZWZ0OiAwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSlcbiAgICB9KVxuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbiBsb2dpbk1vZGFsU2NyaXB0KCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJyxmdW5jdGlvbigpe1xuICAgICBcbiAgICAgICAgICAgIGxldCBsb2dpbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsJylcbiAgICAgICAgICAgIGxldCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtd3JhcHBlci4tLXdyYXBwZXInKVxuICAgICAgICAgICAgbGV0IHVzZXJuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtLXVzZXJuYW1lJylcbiAgICAgICAgICAgIGxldCB1c2VybmFtZUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLS11c2VybmFtZS1lcnJvcicpXG4gICAgICAgICAgICBsZXQgcGFzc3dvcmRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC0tcGFzc3dvcmQnKVxuICAgICAgICAgICAgbGV0IHBhc3N3b3JkRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9naW4tbW9kYWwtLXBhc3N3b3JkLWVycm9yJylcbiAgICAgICAgICAgIGxldCBsb2dpbkVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luLW1vZGFsLS1sb2dpbi1lcnJvcicpXG4gICAgICAgICAgICBsZXQgbW9kYWxMb2dpbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC0tYnV0dG9uJylcbiAgICAgICAgICAgIGxldCBsb2dpbk1vZGFsVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbi1tb2RhbC10cmlnZ2VyJylcbiAgICAgICAgICAgIGxldCBtb2RhbENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLS1jbG9zZS1idG4nKVxuICAgICAgICBcbiAgICAgICAgICAgIGxvZ2luTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpXG4gICAgICAgICAgICBsb2dpbk1vZGFsVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGFsU3RhdGUpXG4gICAgICAgICAgICBtb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTW9kYWxTdGF0ZSlcbiAgICAgICAgICAgIG1vZGFsV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGFsU3RhdGUpXG4gICAgICAgICAgICBtb2RhbExvZ2luQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3VibWl0Q3JlZGVudGlhbHMpXG5cbiAgICAgICAgICAgIGlmKG1vZGFsV3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXItYWN0aXZlJykpe1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgICAgICBpZihlLmtleUNvZGUgPT09IDEzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsTG9naW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdWJtaXRDcmVkZW50aWFscylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlTGlzdGVuZXIoJ2tleWRvd24nLGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMTMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxMb2dpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN1Ym1pdENyZWRlbnRpYWxzKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWJtaXRDcmVkZW50aWFscygpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsdWVcbiAgICAgICAgICAgICAgICBsZXQgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbHVlXG4gICAgICAgICAgICAgICAgbW9kYWxDbG9zZUJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJyx0cnVlKTtcbiAgICAgICAgICAgICAgICBsb2dpbkVycm9yLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgaWYodXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCkgJiYgcGFzc3dvcmRJbnB1dC52YWx1ZS50cmltKCkpe1xuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoKHtuYW1lLHBhc3N3b3JkfSkpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmV0Y2goJy9sb2dpbicse1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6XCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6e1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6Ym9keSxcbiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXMpPT5yZXMuanNvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKChqc29uKT0+e1xuICAgICAgICAgICAgICAgICAgICBtb2RhbENsb3NlQnRuLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZUlucHV0LnZhbHVlID0gJydcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRJbnB1dC52YWx1ZSA9ICcnXG4gICAgICAgICAgICAgICAgICAgIGlmKCEhanNvbi5lcnJvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dpbkVycm9yLnRleHRDb250ZW50ID0gJ1RoZSB1c2VybmFtZSBvciBwYXNzd29yZCBwcm92aWRlZCBpcyBpbmNvcnJlY3QnXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7Y29uc29sZS5sb2coZXJyKX0pXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFuYW1lLnRyaW0oKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZUVycm9yLnRleHRDb250ZW50ID0gJypVc2VybmFtZSBmaWVsZCBpcyBlbXB0eSEnXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCFwYXNzd29yZC50cmltKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRFcnJvci50ZXh0Q29udGVudCA9ICcqUGFzc3dvcmQgZmllbGQgaXMgZW1wdHkhJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU1vZGFsU3RhdGUoKSB7XG4gICAgICAgICAgICAgICAgbG9naW5Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKVxuICAgICAgICAgICAgICAgIG1vZGFsV3JhcHBlci5jbGFzc0xpc3QudG9nZ2xlKCd3cmFwcGVyLWFjdGl2ZScpXG4gICAgICAgICAgICB9XG4gICAgfSlcbn0pKCk7XG5cblxuKGZ1bmN0aW9uIHNlYXJjaFNjcmlwdCgpe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJyxmdW5jdGlvbigpe1xuICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXNoYm9hcmQnKSl7XG4gICAgICAgIGxldCBzZWFyY2hCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCNkYXNoYm9hcmQtc2VhcmNoJylcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnRpY2xlcycpXG4gICAgICAgIHZhciBsb2FkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZGVyLXdyYXBwZXInKVxuICAgICAgICBzZWFyY2hGb3JBcnRpY2xlKCcnLHBvcHVsYXRlQXJ0aWNsZUNvbnRhaW5lcilcblxuICAgICAgICBzZWFyY2hCYXIub25rZXl1cCA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgbG9hZGVyLmNsYXNzTGlzdC5hZGQoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICAgICAgICAgICAgbGV0IHNlYXJjaFRlcm0gPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIHNlYXJjaEZvckFydGljbGUoc2VhcmNoVGVybSxwb3B1bGF0ZUFydGljbGVDb250YWluZXIpXG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlQXJ0aWNsZUNvbnRhaW5lcihyZXN1bHRzKXtcbiAgICAgICAgICAgICAgICByZXN1bHRzLmZvckVhY2goKHBvc3QpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXJ0aWNsZS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9XCJhcnRpY2xlLXRpdGxlXCI+JHtwb3N0LnRpdGxlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cImFydGljbGUtZGVzY3JpcHRpb25cIj4ke3Bvc3QuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPVwiYXJ0aWNsZS1wdWJsaXNoZWQtZGF0ZVwiPiR7cG9zdC5wdWJsaXNoZWREYXRlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cImFydGljbGUtYXV0aG9yXCI+WW91PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdHlsaXNoLXJvdy1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL2Rhc2hib2FyZC9lZGl0b3JcIj48ZGl2IGNsYXNzPVwic3R5bGlzaC10YWdcIj5FRElUPC9kaXY+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZGVsZXRlLWFydGljbGVcIiBkYXRhLWFydGljbGUtaWQ9JHtwb3N0Ll9pZH0gY2xhc3M9XCJzdHlsaXNoLXRhZ1wiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI0U5MUU2MyFpbXBvcnRhbnQ7XCI+REVMRVRFPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGFkZExpc3RlbmVycygpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVycygpe1xuXG4gICAgICAgICAgICBsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnd3JhcHBlci1hY3RpdmUnKVxuXG4gICAgICAgICAgICB2YXIgdG9nZ2xlQWxlcnRNb2RhbFN0YXRlID0gZnVuY3Rpb24oYXJ0aWNsZUlkID0gbnVsbCl7XG4gICAgICAgICAgICAgICAgYWxlcnRNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1hY3RpdmUnKVxuICAgICAgICAgICAgICAgIGFsZXJ0TW9kYWxXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoJ3dyYXBwZXItYWN0aXZlJylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZihhcnRpY2xlSWQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGVsZXRpbmcnLGFydGljbGVUb0RlbGV0ZUlkKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVBcnRpY2xlKGFydGljbGVJZCwobWVzc2FnZSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGVUb0RlbGV0ZUlkID0gJydcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsJylcbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC13cmFwcGVyLi0td3JhcHBlcicpXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsLS1jbG9zZUJ0bicpXG5cbiAgICAgICAgICAgIHZhciBhbGVydE1vZGFsWWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsLXllcycpXG4gICAgICAgICAgICB2YXIgYWxlcnRNb2RhbE5vID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsZXJ0LW1vZGFsLW5vJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFsZXJ0TW9kYWxDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGVydC1tb2RhbC0tY2xvc2VCdG4nKVxuXG4gICAgICAgICAgICB2YXIgYXJ0aWNsZVRvRGVsZXRlSWQgPSAnJ1xuXG4gICAgICAgICAgICBhbGVydE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhbGVydE1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBbGVydE1vZGFsU3RhdGUpXG4gICAgICAgICAgICBhbGVydE1vZGFsV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFsZXJ0TW9kYWxTdGF0ZSlcbiAgICAgICAgICAgIGFsZXJ0TW9kYWxOby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFsZXJ0TW9kYWxTdGF0ZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWxlcnRNb2RhbFllcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57dG9nZ2xlQWxlcnRNb2RhbFN0YXRlKGFydGljbGVUb0RlbGV0ZUlkKX0pXG4gICAgICAgICAgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZGVsZXRlLWFydGljbGUnKSkuZm9yRWFjaCggdCA9PiB0Lm9uY2xpY2sgPSAoZSk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVUb0RlbGV0ZUlkID0gZS50YXJnZXQuZGF0YXNldC5hcnRpY2xlSWRcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RyaWdnZXJpbmcgbW9kYWwnLGFydGljbGVUb0RlbGV0ZUlkKVxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVBbGVydE1vZGFsU3RhdGUoKVxuICAgICAgICAgICAgICAgIH0pICAgICAgICAgICBcbiAgICAgICAgICAgIH0sMClcblxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNlYXJjaEZvckFydGljbGUoc2VhcmNoVGVybSxjYil7XG4gICAgICAgICAgICBmZXRjaChgL3NlYXJjaD9xPSR7c2VhcmNoVGVybX1gKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoanNvbik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGpzb24ucmVzdWx0cylcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkZWxldGVBcnRpY2xlKGFydGljbGVJZCxjYil7XG4gICAgICAgICAgICBmZXRjaChgL2FwaS9hcnRpY2xlL2RlbGV0ZS8ke2FydGljbGVJZH1gKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoanNvbik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKGpzb24ubWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAgIH1cbiAgICAgICB9XG4gICAgfSlcbn0pKClcblxuKGZ1bmN0aW9uIGFsZXJ0UGFuZWxTY3JpcHQoKXtcbiAgICB2YXIgYWxlcnRQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC1wYW5lbCcpXG4gICAgdmFyIGFsZXJ0UGFuZWxDbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydC1wYW5lbC0tY2xvc2UnKVxuICAgIGFsZXJ0UGFuZWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdG9nZ2xlQWxlcnRQYW5lbFN0YXRlKVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQWxlcnRQYW5lbFN0YXRlKCl7XG4gICAgICAgIGFsZXJ0UGFuZWwuY2xhc3NMaXN0LmFkZCgnYWxlcnQtcGFuZWwtaW5hY3RpdmUnKVxuICAgIH1cbn0pKClcblxuKGZ1bmN0aW9uIHNpZGViYXJTY3JpcHQoKSB7XG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXInKSl7XG4gICAgICAgIGxldCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXInKVxuICAgICAgICBsZXQgc2lkZWJhcldyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lkZWJhci13cmFwcGVyLi0td3JhcHBlcicpXG4gICAgXG4gICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXItLXRyaWdnZXInKSl7XG4gICAgICAgIGxldCBzaWRlYmFyVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLS10cmlnZ2VyJylcbiAgICAgICAgc2lkZWJhclRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRvZ2dsZVNpZGViYXJTdGF0ZSlcbiAgICAgICAgc2lkZWJhcldyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRvZ2dsZVNpZGViYXJTdGF0ZSlcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXJTdGF0ZShlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdzaWRlYmFyLWFjdGl2ZScpXG4gICAgICAgIHNpZGViYXJXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoJ3dyYXBwZXItYWN0aXZlJylcbiAgICB9XG4gICAgfVxuICAgIH1cbn0pKCk7XG4iXX0=
